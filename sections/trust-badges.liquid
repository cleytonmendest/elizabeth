{%- comment -%}
  Seção de Trust Badges / Benefits Bar
  Exibe benefícios e garantias da loja para aumentar confiança
{%- endcomment -%}

{%- liquid
  assign layout = section.settings.layout | default: 'grid'
  assign sticky = section.settings.sticky
-%}

<section
  class="trust-badges-section color-{{ section.settings.color_scheme }} color-background color-text {% if sticky %}sticky top-0 z-30{% endif %} transition-all"
  data-trust-badges
>
  <div class="container mx-auto px-4 md:px-6 lg:px-8 py-4 md:py-5">

    {%- comment -%} Grid Layout Desktop {%- endcomment -%}
    {% if layout == 'grid' %}
      <div class="hidden md:grid grid-cols-{{ section.blocks.size }} gap-6 lg:gap-8">
        {% for block in section.blocks %}
          <div class="trust-badge-item text-center" {{ block.shopify_attributes }}>
            {% render 'trust-badge-item',
              block: block
            %}
          </div>
        {% endfor %}
      </div>

      {%- comment -%} Slider Mobile {%- endcomment -%}
      <div class="md:hidden">
        <my-slider
          data-items="{{ section.blocks.size }}"
          data-loop="true"
          data-autoplay="true"
          data-ap-time="4"
          data-pause-hover="true"
          data-dot="true"
          data-qty-desk="4"
          data-qty-tab="2"
          data-qty-mob="1"
        >
          <div class="my-slider__container">
            {% for block in section.blocks %}
              <div class="trust-badge-item text-center" {{ block.shopify_attributes }}>
                {% render 'trust-badge-item',
                  block: block
                %}
              </div>
            {% endfor %}
          </div>
        </my-slider>
      </div>

    {%- comment -%} Slider em todas as telas {%- endcomment -%}
    {% elsif layout == 'slider' %}
      <my-slider
        data-items="{{ section.blocks.size }}"
        data-loop="true"
        data-autoplay="true"
        data-ap-time="4"
        data-pause-hover="true"
        data-dot="true"
        data-qty-desk="{{ section.blocks.size | at_most: 4 }}"
        data-qty-tab="2"
        data-qty-mob="1"
      >
        <div class="my-slider__container">
          {% for block in section.blocks %}
            <div class="trust-badge-item text-center" {{ block.shopify_attributes }}>
              {% render 'trust-badge-item',
                block: block
              %}
            </div>
          {% endfor %}
        </div>
      </my-slider>

    {%- comment -%} Lista simples (sem slider) {%- endcomment -%}
    {% elsif layout == 'list' %}
      <div class="flex flex-wrap justify-center items-center gap-6 lg:gap-10">
        {% for block in section.blocks %}
          <div class="trust-badge-item flex items-center gap-3" {{ block.shopify_attributes }}>
            {% render 'trust-badge-item',
              block: block,
              compact: true
            %}
          </div>
        {% endfor %}
      </div>
    {% endif %}

  </div>
</section>

{% schema %}
{
  "name": "t:sections.trust_badges.name",
  "tag": "section",
  "class": "section-trust-badges",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.trust_badges.settings.color_scheme.label",
      "default": "scheme-1",
      "info": "t:sections.trust_badges.settings.color_scheme.info"
    },
    {
      "type": "header",
      "content": "t:sections.trust_badges.settings.layout_header.content"
    },
    {
      "type": "select",
      "id": "layout",
      "label": "t:sections.trust_badges.settings.layout.label",
      "options": [
        {
          "value": "grid",
          "label": "t:sections.trust_badges.settings.layout.options.grid"
        },
        {
          "value": "slider",
          "label": "t:sections.trust_badges.settings.layout.options.slider"
        },
        {
          "value": "list",
          "label": "t:sections.trust_badges.settings.layout.options.list"
        }
      ],
      "default": "grid",
      "info": "t:sections.trust_badges.settings.layout.info"
    },
    {
      "type": "checkbox",
      "id": "sticky",
      "label": "t:sections.trust_badges.settings.sticky.label",
      "default": false,
      "info": "t:sections.trust_badges.settings.sticky.info"
    }
  ],
  "blocks": [
    {
      "type": "badge",
      "name": "t:sections.trust_badges.blocks.badge.name",
      "settings": [
        {
          "type": "select",
          "id": "icon",
          "label": "t:sections.trust_badges.blocks.badge.settings.icon.label",
          "options": [
            {
              "value": "truck",
              "label": "t:sections.trust_badges.blocks.badge.settings.icon.options.truck"
            },
            {
              "value": "shield",
              "label": "t:sections.trust_badges.blocks.badge.settings.icon.options.shield"
            },
            {
              "value": "refresh",
              "label": "t:sections.trust_badges.blocks.badge.settings.icon.options.refresh"
            },
            {
              "value": "credit-card",
              "label": "t:sections.trust_badges.blocks.badge.settings.icon.options.credit_card"
            },
            {
              "value": "star",
              "label": "t:sections.trust_badges.blocks.badge.settings.icon.options.star"
            },
            {
              "value": "check-circle",
              "label": "t:sections.trust_badges.blocks.badge.settings.icon.options.check_circle"
            },
            {
              "value": "lock",
              "label": "t:sections.trust_badges.blocks.badge.settings.icon.options.lock"
            },
            {
              "value": "clock",
              "label": "t:sections.trust_badges.blocks.badge.settings.icon.options.clock"
            }
          ],
          "default": "truck"
        },
        {
          "type": "text",
          "id": "title",
          "label": "t:sections.trust_badges.blocks.badge.settings.title.label",
          "default": "Free Shipping"
        },
        {
          "type": "text",
          "id": "description",
          "label": "t:sections.trust_badges.blocks.badge.settings.description.label",
          "default": "On orders over $50",
          "info": "t:sections.trust_badges.blocks.badge.settings.description.info"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.trust_badges.presets.name",
      "blocks": [
        {
          "type": "badge",
          "settings": {
            "icon": "truck",
            "title": "Free Shipping",
            "description": "On orders over $50"
          }
        },
        {
          "type": "badge",
          "settings": {
            "icon": "refresh",
            "title": "Easy Returns",
            "description": "30 day return policy"
          }
        },
        {
          "type": "badge",
          "settings": {
            "icon": "shield",
            "title": "Secure Checkout",
            "description": "100% protected"
          }
        },
        {
          "type": "badge",
          "settings": {
            "icon": "credit-card",
            "title": "Flexible Payment",
            "description": "Multiple payment options"
          }
        }
      ]
    }
  ]
}
{% endschema %}
